(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10708,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(48425),i=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var s=e.i(47163);function n({className:e,...r}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],10708)},30030,e=>{"use strict";var t=e.i(71645),r=e.i(43476);function a(e,a){let i=t.createContext(a),s=e=>{let{children:a,...s}=e,n=t.useMemo(()=>s,Object.values(s));return(0,r.jsx)(i.Provider,{value:n,children:a})};return s.displayName=e+"Provider",[s,function(r){let s=t.useContext(i);if(s)return s;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function i(e,a=[]){let s=[],n=()=>{let r=s.map(e=>t.createContext(e));return function(a){let i=a?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...a,[e]:i}}),[a,i])}};return n.scopeName=e,[function(a,i){let n=t.createContext(i),l=s.length;s=[...s,i];let o=a=>{let{scope:i,children:s,...o}=a,d=i?.[e]?.[l]||n,u=t.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:u,children:s})};return o.displayName=a+"Provider",[o,function(r,s){let o=s?.[e]?.[l]||n,d=t.useContext(o);if(d)return d;if(void 0!==i)return i;throw Error(`\`${r}\` must be used within \`${a}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=a.reduce((t,{useScope:r,scopeName:a})=>{let i=r(e)[`__scope${a}`];return{...t,...i}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:i}),[i])}};return a.scopeName=r.scopeName,a}(n,...a)]}e.s(["createContext",()=>a,"createContextScope",()=>i])},30207,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>r.current?.(...e),[])}e.s(["useCallbackRef",()=>r])},34620,e=>{"use strict";var t=e.i(71645),r=globalThis?.document?t.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>r])},23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},67881,20783,91918,70065,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function a(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function i(...e){return t=>{let r=!1,i=e.map(e=>{let i=a(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():a(e[t],null)}}}}function s(...e){return r.useCallback(i(...e),e)}function n(e){var a;let s,n=(a=e,(s=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(r.isValidElement(a)){var n;let e,l,o=(n=a,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),d=function(e,t){let r={...t};for(let a in t){let i=e[a],s=t[a];/^on[A-Z]/.test(a)?i&&s?r[a]=(...e)=>{let t=s(...e);return i(...e),t}:i&&(r[a]=i):"style"===a?r[a]={...i,...s}:"className"===a&&(r[a]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(s,a.props);return a.type!==r.Fragment&&(d.ref=t?i(t,o):o),r.cloneElement(a,d)}return r.Children.count(a)>1?r.Children.only(null):null})).displayName=`${a}.SlotClone`,s),l=r.forwardRef((e,a)=>{let{children:i,...s}=e,l=r.Children.toArray(i),o=l.find(u);if(o){let e=o.props.children,i=l.map(t=>t!==o?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(n,{...s,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,t.jsx)(n,{...s,ref:a,children:i})});return l.displayName=`${e}.Slot`,l}e.s(["composeRefs",()=>i,"useComposedRefs",()=>s],20783);var l=n("Slot"),o=Symbol("radix.slottable");function d(e){let r=({children:e})=>(0,t.jsx)(t.Fragment,{children:e});return r.displayName=`${e}.Slottable`,r.__radixId=o,r}function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===o}e.s(["Slot",()=>l,"createSlot",()=>n,"createSlottable",()=>d],91918);var c=e.i(25913),m=e.i(47163);let p=(0,c.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function f({className:e,variant:r,size:a,asChild:i=!1,...s}){return(0,t.jsx)(i?l:"button",{"data-slot":"button",className:(0,m.cn)(p({variant:r,size:a,className:e})),...s})}function x({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,m.cn)("bg-card text-card-foreground flex flex-col gap-2 rounded-xl border py-2 shadow-sm",e),...r})}e.s(["Button",()=>f,"buttonVariants",()=>p],67881),e.s(["Card",()=>x],70065)},48425,e=>{"use strict";var t=e.i(71645),r=e.i(74080),a=e.i(91918),i=e.i(43476),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=(0,a.createSlot)(`Primitive.${r}`),n=t.forwardRef((e,t)=>{let{asChild:a,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(a?s:r,{...n,ref:t})});return n.displayName=`Primitive.${r}`,{...e,[r]:n}},{});function n(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>s,"dispatchDiscreteCustomEvent",()=>n])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},41947,e=>{"use strict";let t=(0,e.i(75254).default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["default",()=>t])},71428,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",e),...a})}e.s(["Skeleton",()=>a])},55838,(e,t,r)=>{"use strict";var a=e.r(71645),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useState,n=a.useEffect,l=a.useLayoutEffect,o=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=s({inst:{value:r,getSnapshot:t}}),i=a[0].inst,u=a[1];return l(function(){i.value=r,i.getSnapshot=t,d(i)&&u({inst:i})},[e,r,t]),n(function(){return d(i)&&u({inst:i}),e(function(){d(i)&&u({inst:i})})},[e]),o(r),r};r.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:u},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},63270,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(30030),i=e.i(30207),s=e.i(34620),n=e.i(48425),l=e.i(2239);function o(){return()=>{}}var d="Avatar",[u,c]=(0,a.createContextScope)(d),[m,p]=u(d),f=r.forwardRef((e,a)=>{let{__scopeAvatar:i,...s}=e,[l,o]=r.useState("idle");return(0,t.jsx)(m,{scope:i,imageLoadingStatus:l,onImageLoadingStatusChange:o,children:(0,t.jsx)(n.Primitive.span,{...s,ref:a})})});f.displayName=d;var x="AvatarImage",h=r.forwardRef((e,a)=>{let{__scopeAvatar:d,src:u,onLoadingStatusChange:c=()=>{},...m}=e,f=p(x,d),h=function(e,{referrerPolicy:t,crossOrigin:a}){let i=(0,l.useSyncExternalStore)(o,()=>!0,()=>!1),n=r.useRef(null),d=i?(n.current||(n.current=new window.Image),n.current):null,[u,c]=r.useState(()=>y(d,e));return(0,s.useLayoutEffect)(()=>{c(y(d,e))},[d,e]),(0,s.useLayoutEffect)(()=>{let e=e=>()=>{c(e)};if(!d)return;let r=e("loaded"),i=e("error");return d.addEventListener("load",r),d.addEventListener("error",i),t&&(d.referrerPolicy=t),"string"==typeof a&&(d.crossOrigin=a),()=>{d.removeEventListener("load",r),d.removeEventListener("error",i)}},[d,a,t]),u}(u,m),v=(0,i.useCallbackRef)(e=>{c(e),f.onImageLoadingStatusChange(e)});return(0,s.useLayoutEffect)(()=>{"idle"!==h&&v(h)},[h,v]),"loaded"===h?(0,t.jsx)(n.Primitive.img,{...m,ref:a,src:u}):null});h.displayName=x;var v="AvatarFallback",g=r.forwardRef((e,a)=>{let{__scopeAvatar:i,delayMs:s,...l}=e,o=p(v,i),[d,u]=r.useState(void 0===s);return r.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==o.imageLoadingStatus?(0,t.jsx)(n.Primitive.span,{...l,ref:a}):null});function y(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}g.displayName=v;var b=e.i(47163);function j({className:e,...r}){return(0,t.jsx)(f,{"data-slot":"avatar",className:(0,b.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...r})}function k({className:e,...r}){return(0,t.jsx)(h,{"data-slot":"avatar-image",className:(0,b.cn)("aspect-square size-full",e),...r})}function w({className:e,...r}){return(0,t.jsx)(g,{"data-slot":"avatar-fallback",className:(0,b.cn)("bg-muted flex size-full items-center justify-center rounded-full",e),...r})}e.s(["Avatar",()=>j,"AvatarFallback",()=>w,"AvatarImage",()=>k],63270)},37727,e=>{"use strict";var t=e.i(41947);e.s(["X",()=>t.default])},56909,e=>{"use strict";let t=(0,e.i(75254).default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>t],56909)},68553,e=>{"use strict";let t=(0,e.i(75254).default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);e.s(["Camera",()=>t],68553)},60176,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),a=e.i(18566);e.i(51718);var i=e.i(18357);e.i(36180);var s=e.i(98925),n=e.i(76009),l=e.i(61655),o=e.i(67881),d=e.i(70065),u=e.i(23750),c=e.i(10708),m=e.i(71428),p=e.i(81947),f=e.i(63270),x=e.i(20682),h=e.i(71689),v=e.i(63209),g=e.i(75254);let y=(0,g.default)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var b=e.i(68553);let j=(0,g.default)("MailCheck",[["path",{d:"M22 13V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v12c0 1.1.9 2 2 2h8",key:"12jkf8"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}],["path",{d:"m16 19 2 2 4-4",key:"1b14m6"}]]);var k=e.i(56909),w=e.i(84614),N=e.i(37727);function S(){let e=(0,a.useRouter)(),{toast:g}=(0,x.useToast)(),{refreshAuthUser:S}=(0,l.useUserProfile)(),[C,L]=(0,r.useState)(!0),[E,R]=(0,r.useState)(!1),[P,z]=(0,r.useState)(null),[A,U]=(0,r.useState)(null),[D,M]=(0,r.useState)(""),[T,V]=(0,r.useState)(""),[_,B]=(0,r.useState)(""),[I,$]=(0,r.useState)(""),[O,F]=(0,r.useState)(null),[G,K]=(0,r.useState)(""),[W,H]=(0,r.useState)(!1),[q,Y]=(0,r.useState)(0),X=(0,r.useRef)(null),[Z,J]=(0,r.useState)(""),[Q,ee]=(0,r.useState)(!1),[et,er]=(0,r.useState)(!1),[ea,ei]=(0,r.useState)(!1),[es,en]=(0,r.useState)(""),[el,eo]=(0,r.useState)(""),[ed,eu]=(0,r.useState)(""),[ec,em]=(0,r.useState)(!1),ep=(0,r.useRef)({displayName:"",email:"",phone:"",photoURL:""}),ef=(0,r.useMemo)(()=>{let e=D.trim()||T.trim();return e?e.split(/\s+/).slice(0,2).map(e=>e[0]?.toUpperCase()??"").join(""):""},[D,T]),ex=(0,r.useMemo)(()=>{let e=ep.current;return D!==e.displayName||_!==e.phone||I!==e.photoURL||!!O},[D,_,I,O]),eh=(0,r.useMemo)(()=>!C&&!E&&!W&&!!A&&ex,[C,E,W,A,ex]),ev=(0,r.useMemo)(()=>{let e=n.auth.currentUser;return!!e&&(e.providerData||[]).some(e=>e?.providerId==="password")},[A]),eg=e=>{if(!e)return"";let t="string"==typeof e?new Date(e):e;return Number.isNaN(t?.getTime?.())?"":new Intl.DateTimeFormat("tr-TR",{month:"long",year:"numeric"}).format(t)},ey=()=>X.current?.click(),eb=e=>{e?e.type.startsWith("image/")?e.size>5242880?g({variant:"destructive",title:"Dosya çok büyük",description:"Profil fotoğrafı en fazla 5MB olabilir."}):F(e):g({variant:"destructive",title:"Geçersiz dosya",description:"Lütfen bir görsel dosyası seç (PNG/JPG/WebP)."}):F(null)};(0,r.useEffect)(()=>{if(!O)return void K("");let e=URL.createObjectURL(O);return K(e),()=>{try{URL.revokeObjectURL(e)}catch{}}},[O]),(0,r.useEffect)(()=>{let t=null,r=(0,i.onAuthStateChanged)(n.auth,r=>{if(t){try{t()}catch{}t=null}if(!r){U(null),L(!1),e.replace("/login");return}U(r.uid),V(r.email??""),M(r.displayName??""),$(r.photoURL??""),ee(r.emailVerified),er(!!r.phoneNumber);let a=eg(r.metadata?.creationTime??null);a&&J(a);let i=(0,s.doc)(n.db,"users",r.uid);t=(0,s.onSnapshot)(i,e=>{let t=e.data(),a="string"==typeof t?.displayName&&t.displayName.trim()?t.displayName:r.displayName??"",i="string"==typeof t?.email&&t.email?t.email:r.email??"",s="string"==typeof t?.phone?t.phone:"",n="string"==typeof t?.photoURL?t.photoURL:r.photoURL??"",l="boolean"==typeof t?.phoneVerified?t.phoneVerified:et;if(M(a),V(i),B(s),$(n),er(l),t?.createdAt?.toDate){let e=eg(t.createdAt.toDate());e&&J(e)}ep.current={displayName:a,email:i,phone:s,photoURL:n},L(!1)},e=>{console.error("Profile load error:",e),z("Profil bilgileri yüklenemedi."),L(!1)})},e=>{console.error("Auth error:",e),z("Oturum doğrulanamadı."),L(!1)});return()=>{try{r()}catch{}if(t)try{t()}catch{}}},[e]);let ej=async()=>{if(!O||!A)return null;H(!0),Y(0);try{let e=new FormData;e.append("file",O),e.append("upload_preset","kasa_avatars"),e.append("folder",`avatars/${A}`);let t=await fetch("https://api.cloudinary.com/v1_1/dmqar4nc1/image/upload",{method:"POST",body:e});if(!t.ok){let e="";try{let r=await t.text();e=r?` (${r})`:""}catch{}throw Error(`Cloudinary upload başarısız oldu${e}`)}let r=await t.json(),a=(r?.secure_url||r?.url||"").toString();if(!a)throw Error("Cloudinary yanıtında URL bulunamadı");return Y(100),a}finally{H(!1)}},ek=async()=>{z(null);let t=n.auth.currentUser;if(!t||!A)return void e.replace("/login");let r=D.trim();R(!0);try{let e=(await ej()??I).trim();await (0,i.updateProfile)(t,{displayName:r||void 0,photoURL:e||void 0});try{await n.auth.currentUser?.reload(),await S()}catch{}await (0,s.setDoc)((0,s.doc)(n.db,"users",A),{displayName:r,email:T,phone:_.trim(),photoURL:e,updatedAt:(0,s.serverTimestamp)()},{merge:!0}),ep.current={displayName:r,email:T,phone:_.trim(),photoURL:e},F(null),Y(0),g({title:"Profil güncellendi",description:"Bilgilerin kaydedildi."})}catch(t){let e=t?.message||"Profil güncellenemedi.";z(e),g({variant:"destructive",title:"Kaydedilemedi",description:e})}finally{R(!1)}},ew=async()=>{if(ea)return;let t=n.auth.currentUser;if(!t)return void e.replace("/login");if(t.emailVerified){g({title:"Zaten doğrulanmış",description:"E-posta adresin zaten doğrulanmış görünüyor."}),ee(!0);return}ei(!0);try{await (0,i.sendEmailVerification)(t);try{await t.reload()}catch{}ee(n.auth.currentUser?.emailVerified??t.emailVerified),g({title:"Doğrulama e-postası gönderildi",description:"Gelen kutunu (spam dahil) kontrol et."})}catch(e){g({variant:"destructive",title:"Gönderilemedi",description:"auth/too-many-requests"===e?.code?"Çok fazla istek yapıldı. Lütfen biraz bekleyip tekrar dene.":e?.message||"E-posta gönderilemedi."})}finally{ei(!1)}},eN=async()=>{let t=n.auth.currentUser;if(!t)return void e.replace("/login");if(!t.email||!ev)return void g({variant:"destructive",title:"Bu hesap için desteklenmiyor",description:"Google ile giriş yaptığın için bu ekrandan şifre değiştiremezsin."});if(!es||!el||!ed)return void g({variant:"destructive",title:"Eksik bilgi",description:"Lütfen mevcut şifreyi ve yeni şifreyi (tekrar) doldur."});if(el.length<6)return void g({variant:"destructive",title:"Şifre çok kısa",description:"Yeni şifre en az 6 karakter olmalı."});if(el!==ed)return void g({variant:"destructive",title:"Şifreler eşleşmiyor",description:"Yeni şifre ve tekrarı aynı olmalı."});if(es===el)return void g({variant:"destructive",title:"Geçersiz şifre",description:"Yeni şifre mevcut şifre ile aynı olamaz."});em(!0);try{let e=i.EmailAuthProvider.credential(t.email,es);await (0,i.reauthenticateWithCredential)(t,e),await (0,i.updatePassword)(t,el),en(""),eo(""),eu(""),g({title:"Şifre güncellendi",description:"Şifren başarıyla değiştirildi."})}catch(t){let e=t?.code;g({variant:"destructive",title:"Şifre değiştirilemedi",description:"auth/wrong-password"===e||"auth/invalid-credential"===e?"Mevcut şifre yanlış.":"auth/too-many-requests"===e?"Çok fazla deneme yapıldı. Lütfen biraz bekleyip tekrar dene.":"auth/requires-recent-login"===e?"Güvenlik için tekrar giriş yapman gerekiyor. Çıkış yapıp yeniden giriş yap ve tekrar dene.":t?.message||"Şifre değiştirilemedi."})}finally{em(!1)}},eS=async()=>{let e=n.auth.currentUser,t=T||e?.email||"";if(!t)return void g({variant:"destructive",title:"E-posta bulunamadı",description:"Şifre sıfırlamak için e-posta adresi gerekiyor."});if(!ev)return void g({variant:"destructive",title:"Bu hesap için desteklenmiyor",description:"Google ile giriş yaptığın için şifre sıfırlama e-postası gönderilmez."});try{await (0,i.sendPasswordResetEmail)(n.auth,t),g({title:"Şifre sıfırlama e-postası gönderildi",description:"Gelen kutunu kontrol et. (SMS değil, e-posta ile gönderilir.)"})}catch(e){g({variant:"destructive",title:"Gönderilemedi",description:e?.message||"Şifre sıfırlama e-postası gönderilemedi."})}};if(C)return(0,t.jsx)("div",{className:"min-h-screen bg-background pb-20",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl p-4 sm:p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.Skeleton,{className:"h-9 w-9 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.Skeleton,{className:"h-5 w-32"}),(0,t.jsx)(m.Skeleton,{className:"h-4 w-40"})]})]}),(0,t.jsx)(m.Skeleton,{className:"h-20 w-full"}),(0,t.jsx)(m.Skeleton,{className:"h-32 w-full"})]})});let eC=G||I;return(0,t.jsxs)("div",{className:"min-h-screen bg-background pb-20",children:[ex&&(0,t.jsx)("div",{className:"sticky top-0 z-20 border-b bg-background/80 backdrop-blur",children:(0,t.jsxs)("div",{className:"mx-auto max-w-4xl px-3 sm:px-6 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(k.Save,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"font-medium",children:"Kaydedilmemiş değişiklikler var"}),W?(0,t.jsxs)("span",{className:"text-xs text-muted-foreground",children:["• Fotoğraf yükleniyor (%",q,")"]}):null]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.Button,{type:"button",variant:"ghost",onClick:()=>{let e=ep.current;M(e.displayName),V(e.email),B(e.phone),$(e.photoURL),F(null),Y(0),z(null)},disabled:E||W,children:[(0,t.jsx)(N.X,{className:"mr-2 h-4 w-4"}),"Vazgeç"]}),(0,t.jsxs)(o.Button,{type:"button",onClick:ek,disabled:!eh,children:[(0,t.jsx)(k.Save,{className:"mr-2 h-4 w-4"}),E?"Kaydediliyor...":"Kaydet"]})]})]})}),(0,t.jsxs)("div",{className:"mx-auto max-w-4xl p-3 sm:p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(o.Button,{variant:"ghost",size:"icon",onClick:()=>e.push("/settings"),className:"h-8 w-8 sm:h-9 sm:w-9",children:(0,t.jsx)(h.ArrowLeft,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"Profil Ayarları"}),(0,t.jsxs)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:["Üyelik: ",Z||"—"]})]})]}),P&&(0,t.jsxs)(p.Alert,{variant:"destructive",children:[(0,t.jsx)(v.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(p.AlertDescription,{children:P})]}),(0,t.jsxs)(d.Card,{className:"p-4 sm:p-6",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4 mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold",children:"Profil"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Fotoğrafını ve temel bilgilerini güncelle."})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative group w-fit",onClick:ey,onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{e.preventDefault(),e.stopPropagation(),eb(e.dataTransfer.files?.[0]||null)},role:"button",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&ey()},"aria-label":"Profil fotoğrafı seç",children:[(0,t.jsxs)(f.Avatar,{className:"h-16 w-16 sm:h-20 sm:w-20 ring-1 ring-border group-hover:ring-2 group-hover:ring-primary transition",children:[eC?(0,t.jsx)(f.AvatarImage,{src:eC,alt:D||"Avatar"}):null,(0,t.jsx)(f.AvatarFallback,{className:"bg-primary text-primary-foreground text-xl font-semibold",children:ef||"?"})]}),(0,t.jsx)("div",{className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full bg-background border shadow-sm flex items-center justify-center",children:(0,t.jsx)(b.Camera,{className:"h-4 w-4"})}),W?(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-background/60 backdrop-blur-sm flex items-center justify-center",children:(0,t.jsxs)("span",{className:"text-xs font-medium",children:["%",q]})}):null]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:D||"(İsim yok)"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:T||""}),(0,t.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"Fotoğrafı değiştirmek için avatar'a tıkla veya sürükle-bırak yap."}),(0,t.jsx)("input",{ref:X,type:"file",accept:"image/*",className:"hidden",onChange:e=>eb(e.target.files?.[0]||null),disabled:E||W}),O?(0,t.jsx)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:(0,t.jsx)(o.Button,{type:"button",variant:"outline",onClick:()=>eb(null),disabled:E||W,children:"Seçimi kaldır"})}):null,W?(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${q}%`}})}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-muted-foreground",children:["Fotoğraf yükleniyor… %",q]})]}):null]})]}),(0,t.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"display-name",children:"Görünen ad"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.User,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(u.Input,{id:"display-name",value:D,onChange:e=>M(e.target.value),placeholder:"Ad Soyad",disabled:E})]})]})})]}),(0,t.jsxs)(d.Card,{className:"p-4 sm:p-6",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4 mb-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold",children:"Hesap"}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"E-posta doğrulama ve hesap durumunu yönet."})]})}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:(0,t.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,t.jsx)(c.Label,{htmlFor:"email",children:"E-posta"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j,{className:"h-4 w-4 text-muted-foreground"}),(0,t.jsx)(u.Input,{id:"email",value:T,disabled:!0,readOnly:!0})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs ${Q?"bg-green-100 text-green-700 dark:bg-green-950/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-950/30 dark:text-amber-400"}`,children:[(0,t.jsx)(y,{className:"h-3.5 w-3.5"}),Q?"Doğrulandı":"Doğrulanmadı"]}),!Q&&(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:ew,disabled:E||ea,children:ea?"Gönderiliyor...":"Doğrulama gönder"})]}),(0,t.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"Doğrulanmış e-posta, bazı güvenlik işlemleri için gerekli olabilir."}),(0,t.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,t.jsx)(c.Label,{children:"Telefon"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("div",{className:`inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs ${et?"bg-green-100 text-green-700 dark:bg-green-950/30 dark:text-green-400":"bg-amber-100 text-amber-700 dark:bg-amber-950/30 dark:text-amber-400"}`,children:[(0,t.jsx)(y,{className:"h-3.5 w-3.5"}),et?"Doğrulandı":"Doğrulanmadı"]}),(0,t.jsx)(o.Button,{type:"button",onClick:()=>e.push("/profile/settings/phone"),children:et?"Telefonu yönet":"Telefonu doğrula"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Telefon doğrulaması SMS ile yapılır. Web tarafında reCAPTCHA kullanılır."})]})]})})]}),(0,t.jsxs)(d.Card,{className:"p-4 sm:p-6",children:[(0,t.jsx)("div",{className:"flex items-start justify-between gap-4 mb-6",children:(0,t.jsx)("div",{children:(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold",children:"Güvenlik"})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{children:"Şifre"}),(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,t.jsx)("div",{className:"space-y-2 sm:col-span-2",children:(0,t.jsx)("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Mevcut şifreni doğrulayarak yeni şifre belirleyebilirsin."})}),ev?null:(0,t.jsx)("div",{className:"sm:col-span-2 rounded-md border bg-muted/40 p-3 text-xs sm:text-sm text-muted-foreground",children:"Google ile giriş yaptığın için bu ekrandan şifre değiştirme kapalıdır."}),(0,t.jsxs)("div",{className:"space-y-2 sm:col-span-2",children:[(0,t.jsx)(c.Label,{htmlFor:"current-password",children:"Mevcut şifre"}),(0,t.jsx)(u.Input,{id:"current-password",type:"password",value:es,onChange:e=>en(e.target.value),placeholder:"••••••••",disabled:!ev||ec||E||W,autoComplete:"current-password"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"new-password",children:"Yeni şifre"}),(0,t.jsx)(u.Input,{id:"new-password",type:"password",value:el,onChange:e=>eo(e.target.value),placeholder:"En az 6 karakter",disabled:!ev||ec||E||W,autoComplete:"new-password"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(c.Label,{htmlFor:"confirm-new-password",children:"Yeni şifre (tekrar)"}),(0,t.jsx)(u.Input,{id:"confirm-new-password",type:"password",value:ed,onChange:e=>eu(e.target.value),placeholder:"En az 6 karakter",disabled:!ev||ec||E||W,autoComplete:"new-password"})]}),(0,t.jsx)("div",{className:"sm:col-span-2 pt-1",children:(0,t.jsx)(o.Button,{type:"button",variant:"outline",onClick:eN,disabled:!ev||ec||E||W,className:"w-full sm:w-auto",children:ec?"Güncelleniyor...":"Şifreyi güncelle"})}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)(o.Button,{type:"button",variant:"ghost",onClick:eS,disabled:!ev||ec||E||W,className:"px-0",children:"Şifremi unuttum"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Şifre sıfırlama bağlantısı kayıtlı e-posta adresine gönderilir."})]})]})]})]}),!ex&&(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(o.Button,{onClick:ek,disabled:!eh,className:"w-full sm:w-auto",children:[(0,t.jsx)(k.Save,{className:"mr-2 h-4 w-4"}),E?"Kaydediliyor...":"Kaydet"]})})]})]})}e.s(["default",()=>S],60176)}]);